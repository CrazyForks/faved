<VirtualHost *:80>
    ServerName faved

    DocumentRoot "/var/www/html/public"

    <IfModule xsendfile_module>
        XSendFilePath "/var/www/html/public"
    </IfModule>

    <IfModule mod_rewrite.c>
        RewriteEngine On

        # Serve existing files or directories directly
        RewriteCond %{DOCUMENT_ROOT}/dist%{REQUEST_URI} -f [OR]
        RewriteCond %{DOCUMENT_ROOT}/dist%{REQUEST_URI} -d
        RewriteRule ^(.*)$ /dist/$1 [L]


        # Redirect '/api' prefixed path to api/index.php
        RewriteRule ^/api(/.*|)$ api/index.php [L]

        # Redirect all other paths to index.html
        RewriteRule ^ dist/index.html [L]
    </IfModule>

    <Directory "/var/www/html/public">
        Options Includes FollowSymLinks ExecCGI
        AllowOverride All
        <IfModule authz_host_module>
            Order allow,deny
            Allow from all
        </IfModule>
    </Directory>
</VirtualHost>
